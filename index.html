<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="">
	<title>New Game</title>
	 <link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
	<style type="text/css">
		html {
			height: 100%;
			width: 100%;
		}     
		@font-face {
		  font-family: 'Press Start 2p';
		}  
body {
	height: 100%;
	width: 100%;
	background: black;
	display: flex;
	align-items: center;
	justify-content: center;
}
.interface {
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: url('https://alfasport.by/files/images/articles/court_panel.jpg') no-repeat center / cover;
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	z-index: 200;

  font-family: 'Press Start 2p';
}
.interface.hidden {
	display: none;
}
.interface_item.active {
	color: #fff;
}
.interface_item {
	text-shadow: 1px 1px pink, -1px -1px maroon;

	line-height: 1.5em;
	text-align: center;
	text-align: center;
	display: inline-block;
	width: auto;
	-webkit-border-radius: .75em;
	-moz-border-radius: .75em;
	-o-border-radius: .75em;
		border-radius: .75em;
	background-color: red;
	-webkit-box-shadow:  0 .2em maroon;
	-moz-box-shadow:  0 .2em maroon;
	-o-box-shadow:  0 .2em maroon;
	box-shadow:  0 .2em maroon;
	color: red;
	margin: 0 10px;
	background-color: red;
	background-image: -o-linear-gradient(left top, pink 3%, red 22%, maroon 99%);
	background-image: -moz-linear-gradient(left top, pink 3%, red 22%, maroon 99%);
	background-image: -webkit-linear-gradient(left top, pink 3%, red 22%, maroon 99%);
	background-image: linear-gradient(left top, pink 3%, red 22%, maroon 99%);
	cursor: pointer;
  padding-left: 5px;
  padding: 10px;
}
.rules {
	background: #fff;
	border-radius: 20px;
	padding: 20px;
	font-size: 12px;
	margin: 40px auto;
	max-width: 400px;
	white-space: pre-line;
    line-height: 1.4;
}
.interface_button {
	margin: 20px 0 0;
	text-align: center;
	display: inline-block;
    font-weight: bold;
    padding: 20px;
    text-decoration: none;
    background-color: lightgray;
    text-shadow: -1px -1px black, 1px 1px white;
    color: gray;
    -webkit-border-radius: 7px;
	-moz-border-radius: 7px;
	-o-border-radius: 7px;
	border-radius: 7px;
    box-shadow: 0 .2em gray; 
    cursor: pointer;
}
.interface_button:active, .interface_button:active {
	box-shadow: none;
	position: relative;
	top: .2em;
}
.playBox {
	background: #fafafa;
	width: 500px;
	height: 500px;
	position: relative;
}
.ball {
	position: absolute;
	top: 0;
	left: 0;
	width: 35px;
	height: 35px;
	background: url('ball.png') no-repeat center / 100% 100%;
	z-index: 5;
}
.busket {
	width: 100px;
	height: 100px;
	background: url('net.png') no-repeat center / 100% 100%;
	position: absolute;
	top: 100px;
	right: 0;
}

.busket2{
	width: 100px;
	height: 100px;
	background: url('net2.png') no-repeat center / 100% 100%;
	position: absolute;
	top: 100px;
	right: 0;
	z-index: 10;
}
.time {
	color: #fff;
    position: absolute;
    top: 30px;
    display: flex;
    left: 50%;
    font-size: 30px;
    transform: translateX(-200px);
}
.score {  
	color: #fff;
    position: absolute;
    top: 30px;
    display: flex;
    right: 50%;
    font-size: 30px;
    transform: translateX(200px);
}
.buttonPlay {
	position: absolute;
    top: 27px;
    font-size: 20px;
    background: #fff;
    border: none;
    padding: 10px 20px;
}
button {
	font-size: 20px;
    background: #fff;
    border: none;
    padding: 10px 20px;
    margin: 20px 0;   
}
.minutes {
	margin-left: 5px;
}
.gameLevels {
	display: flex;
    flex-direction: column;
    margin-left: -30px;
    margin-right: 30px;
}
.overlay {
	position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 30;
    /*display: flex;*/
    align-items: center;
    justify-content: center;
    background: url(https://usatftw.files.wordpress.com/2020/04/jordan-3.jpg?w=1000&h=600&crop=1) no-repeat center / cover;
    color: #fff;
    font-size: 80px;
	flex-direction: column;
	display: none;
}
</style>
<div class="interface">
	<div class="rules">
		To play this Game you need to press next buttons:
		"W" - go up
		"A" - go left
		"S" - go down
		"D" - go right
		Move ball to the busket
	</div>
	<div class="interface-levels">
		<div class="interface_item interface_item--level-1" onclick="makeLevel(500)">Easy</div>
		<div class="interface_item interface_item--level-2 active" onclick="makeLevel(200)">Medium</div>
		<div class="interface_item interface_item--level-3" onclick="makeLevel(50)">Hard</div>	
	</div>
	<div class="interface_button interface_button--play" onclick="countdown( '.minutes', 1, 0 )">Play</div>
	<a class="interface_button interface_button--exit" href="http://google.com">Exit</a>
</div>
<div class="overlay">
	<div class="finishResult">Looser!!!</div>
	Your score is: <span class="finishScore">12</span>
	<button onclick="restartGame()">Play again</button>
</div>
<!-- <button class="buttonPlay" onclick="countdown( '.minutes', 1, 0 )">
	Play
</button> -->
<div class="time">
	Time: 
	<div class="minutes">1:00</div>
</div>
<div class="score">Score: <span class="ourScore">0</span></div>
<!-- <div class="gameLevels">
	<button onclick="makeLevel(500)">Easy</button>
	<button onclick="makeLevel(200)">Medium</button>
	<button onclick="makeLevel(50)">Hard</button>
</div> -->
<div class="playBox">
	<div class="ball"></div>
	<div class="busket"></div>
	<div class="busket2"></div>
</div>

<script type="text/javascript">
	var movingDirection;
	var speed;
	var goal = false;
	var score = 0;
	var started = false;
	makeLevel(200);
	function makeLevel(speedLevel) {
		speed = speedLevel;
	}

	function checkPosition() {
		var leftBusket = document.querySelector('.busket').offsetLeft;
		var topBusket = document.querySelector('.busket').offsetTop;
		var busketWidth = document.querySelector('.busket').offsetWidth;
		var leftBall = document.querySelector('.ball').offsetLeft;
		var topBall = document.querySelector('.ball').offsetTop;

		if (((leftBall > leftBusket + 20) && (leftBall < leftBusket + busketWidth - 20)) && (goal == false) && ((topBall > topBusket + 60) && (topBall < topBusket + 90))) {
			//is goal

			score += 2;
			document.querySelector('.ourScore').innerHTML = score;
			goal = true;

			setTimeout( function replaceNet () {
		    	var newTop = Math.floor(Math.random() * 400) + 1;   // x - высота блока - высота кольца
				var newLeft = Math.floor(Math.random() * 400) + 1;  // x - ширина блока - ширина кольца

				document.querySelector('.busket').style.top = newTop + 'px';
		        document.querySelector('.busket').style.left = newLeft + 'px';

		        document.querySelector('.busket2').style.top = newTop + 'px';
		        document.querySelector('.busket2').style.left =  newLeft + 'px';

		        goal = false;
		    } , 500);
		}
	}
	document.querySelector('.interface_item--level-1').onclick = function() {
		document.querySelector('.interface_item.active').classList.remove('active')
		this.classList.add('active')
	}
	document.querySelector('.interface_item--level-2').onclick = function() {
		document.querySelector('.interface_item.active').classList.remove('active')
		this.classList.add('active')
	}
	document.querySelector('.interface_item--level-3').onclick = function() {
		document.querySelector('.interface_item.active').classList.remove('active')
		this.classList.add('active')
	}
	function testZone () {''
		if ((document.querySelector('.ball').offsetTop < 0 ) || (document.querySelector('.ball').offsetTop > 465 )) {
        	alert('Come back');
        	document.querySelector('.ball').style.top = 0;
        	document.querySelector('.ball').style.left = 0;
        	clearInterval(movingDirection);
        	// countdown( '.minutes', 1, 0 )
        } else if ((document.querySelector('.ball').offsetLeft < 0) || (document.querySelector('.ball').offsetLeft > 465 )) {
        	alert('Come back');
        	document.querySelector('.ball').style.top = 0;
        	document.querySelector('.ball').style.left = 0;
        	clearInterval(movingDirection);
        	// countdown( '.minutes', 1, 0 )
        }
        checkPosition ();
	}
	function moving (direction) {
		if (direction == 'top') {
			clearInterval(movingDirection)
			movingDirection = setInterval (function () {
				var currentTop = document.querySelector('.ball').offsetTop;
	            document.querySelector('.ball').style.top = currentTop - 10 + 'px';
	            testZone ();
			}, speed)
		} else if (direction == 'right') {
			clearInterval(movingDirection)
			movingDirection = setInterval (function () {
				var currentLeft = document.querySelector('.ball').offsetLeft;
	            document.querySelector('.ball').style.left = currentLeft + 10 + 'px';
	            testZone ();
			}, speed)
		} else if (direction == 'left') {
			clearInterval(movingDirection);
			movingDirection = setInterval (function () {
				var currentLeft = document.querySelector('.ball').offsetLeft;
	            document.querySelector('.ball').style.left = currentLeft - 10 + 'px';
	            testZone ();
			}, speed)
		} else {
			// down
			clearInterval(movingDirection)
			movingDirection = setInterval (function () {
				var currentTop = document.querySelector('.ball').offsetTop;
	            document.querySelector('.ball').style.top = currentTop + 10 + 'px';
				testZone ();
			}, speed)
		}
	}
	
	document.onkeyup = function(e) { 
		if (started == true) {
			if (event.keyCode === 87) { 
	            //Up (W)
	            moving ('top');
	        };
	        if (event.keyCode === 68) { 
	            //Right (D)
	            moving ('right');
	        };
	        if (event.keyCode === 65) { 
	            //Left (A)
	            moving ('left');
	        };
	        if (event.keyCode === 83) { 
	            //Down (S)
	            moving ('bottom');
	        };
		}
    };
	    
   function restartGame () {
   	started = true;
   	score = 0;
    document.querySelector('.overlay').style.display = 'none';
    document.querySelector('.finishScore').innerHTML = '0';
   	countdown( '.minutes', 1, 0 );
   	document.querySelector('.ball').style.top = 0;
	document.querySelector('.ball').style.left = 0;
	clearInterval(movingDirection);
   }

   function countdown( elementName, minutes, seconds )
	{
		document.querySelector('.interface').classList.add('hidden');
		started = true;
		// document.querySelector('.buttonPlay').style.display = 'none';
	    var element, endTime, hours, mins, msLeft, time;

	    function twoDigits( n )
	    {
	        return (n <= 9 ? "0" + n : n);
	    }

	    function updateTimer()
	    {
	        msLeft = endTime - (+new Date);
	        if ( msLeft < 1000 ) {
	            document.querySelector('.overlay').style.display = 'flex';
	            document.querySelector('.finishScore').innerHTML = score;
				started = false;
	            if (score < 10) {
	            	document.querySelector('.finishResult').innerHTML = 'Looser!';
	            } else {
	            	document.querySelector('.finishResult').innerHTML = 'Good job!';
	            }
	            clearInterval(movingDirection);
	        } else {
	            time = new Date( msLeft );
	            hours = time.getUTCHours();
	            mins = time.getUTCMinutes();
	            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
	            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
	        }
	    }

	    element = document.querySelector( elementName );
	    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
	    updateTimer();
	}

	</script>
</body>
</html>
